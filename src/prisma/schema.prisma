// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model Module_IOT {
  id Int @id @default(autoincrement())
  name String
  create_at DateTime @default(now())
  update_at DateTime @default(now())
  logs Log[]
  type_measures Type_measure @relation(fields : [typeMeasure_id], references : [id])
  typeMeasure_id Int
}

model Type_measure {
  id Int @id @default(autoincrement())
  value String  @unique(map: "Type_measure_value_unique_constraint")
  modules Module_IOT[]
}

model Log {
  id Int @id @default(autoincrement())
  restart Boolean?
  dysfonction Boolean?
  surcharge Boolean?
  date DateTime @default(now())
  module_id Int
  modules Module_IOT @relation(fields: [module_id], references: [id], onDelete : Cascade)
  measures Measure[]
}

model Measure {
   id Int @id @default(autoincrement())
   value Int
   date DateTime @default(now())
   log_id Int
    logs Log @relation(fields: [log_id], references : [id], onDelete: Cascade)
}
